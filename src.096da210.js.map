{"version":3,"sources":["data/dataStore.js","framework/element.js","framework/render.js","data/yahooFinanceAPI.js","utils.js","data/stockQuotesData.js","components/SearchByTicker.js","components/TickerQuotesItem.js","components/StockQuotesToday.js","components/StockQuotesResults.js","components/App.js","index.js"],"names":["dataStore","currentTicker","tickerProfile","currentStock","stockProfile","currentGainers","gainersProfile","isSearchDataLoading","isSwitchDataLoading","error","createElement","tag","props","children","element","DocumentFragment","document","Object","entries","forEach","name","value","startsWith","toLowerCase","window","addEventListener","substr","includes","removeAttribute","setAttribute","e","console","child","appendChild","parent","Array","isArray","subChild","nodeType","createTextNode","toString","createFragment","renderApp","Component","Target","componentFunction","target","innerHTML","getQuotesByTickerURL","ticker","replace","getGainersLosersURL","stock","fetchBySymbol","url","fetch","method","headers","then","res","ok","json","Error","statusText","fetchGainersLosers","NEW_YORK_STOCK","LONDON_STOCK","SINGAPORE_STOCK","allowedTickers","getDateFromUnixTimestamp","dt","Date","toLocaleDateString","getCurrentTickerData","isCurrentTickerLoaded","Boolean","validateAndLoadTickerData","join","Promise","resolve","urlByTicker","quoteResponse","data","result","performSearch","catch","finally","SearchByTicker","TickerQuotesItem","item","StockQuotesToday","quotesData","dataToShow","map","key","StockQuotesResults","content","App","module","hot","accept","getElementById"],"mappings":"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","file":"src.096da210.js","sourceRoot":"..\\src","sourcesContent":["const dataStore = {\n  currentTicker: '',\n  tickerProfile: {},\n  currentStock: 'GB',\n  stockProfile: {},\n  currentGainers: '',\n  gainersProfile: {},\n  isSearchDataLoading: false,\n  isSwitchDataLoading: false,\n  error: null,\n};\n\nexport default dataStore;\n","/**\n * Creates DOM Node. Implements jsx-parser's createElement API\n * @param {string|Function} tag - HTML tag as string or Component function\n * @param {object} props - element properties as parsed by jsx-parser\n * @param {Node[]} children - child elements\n * @returns {DocumentFragment|Element}\n */\nexport const createElement = (tag, props, ...children) => {\n  if (typeof tag === 'function') {\n    /*\n        Passing children as the 2nd argument is required as jsx transformer puts component functions\n        and regular tags in wrapper functions that expect children as the 2nd param\n       */\n    return tag({ ...props, children }, children);\n  }\n  const element = tag === '' ? new DocumentFragment() : document.createElement(tag);\n  Object.entries(props || {}).forEach(([name, value]) => {\n    if (name.startsWith('on') && name.toLowerCase() in window) {\n      element.addEventListener(\n        name.toLowerCase().substr(2),\n        /** @type {Function} */\n        value,\n      );\n    } else {\n      try {\n        if (!(element instanceof DocumentFragment)) {\n          // Boolean attributes are considered to be true if they're present on the element at all, regardless of their actual value\n          // https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute#example\n          if (['disabled', 'checked'].includes(name) && !value) {\n            element.removeAttribute(name);\n          } else {\n            element.setAttribute(name, value);\n          }\n        }\n      } catch (e) {\n        console.error('createElement caught', e, 'on', element);\n      }\n    }\n  });\n\n  children.forEach(child => appendChild(element, child));\n\n  return element;\n};\n\n/**\n * Appends child elements from an unbound array of children, recursively\n * @param {Node} parent\n * @param {Node|[Node]} child\n */\nconst appendChild = (parent, child) => {\n  if (Array.isArray(child)) {\n    child.forEach(subChild => appendChild(parent, subChild));\n  } else {\n    // Skip null and undefined\n    if (child != null) {\n      parent.appendChild(child.nodeType ? child : document.createTextNode(child.toString()));\n    }\n  }\n};\n\n/**\n * Creates Fragment. Implements jsx-parser's createFragment API\n * @param {object} props - effectively a placeholder, fragment never has any properties\n * @param {Node[]} children - child elements\n * @returns {DocumentFragment}\n */\nexport const createFragment = (props, ...children) => createElement('', props, ...children);\n","/** @jsx createElement */\n/*** @jsxFrag createFragment */\nimport { createElement } from './element';\n\nlet Component, Target;\n\n/**\n * Renders a component and attaches it to the target DOM element\n * @param componentFunction - Component function or class\n * @param target - DOM element to attach component to\n */\n\nfunction renderApp(componentFunction = null, target = null) {\n  // Memorize parameters to enable re-render when `renderApp` gets called without arguments\n  if (componentFunction) Component = componentFunction;\n  if (target) Target = target;\n  Target.innerHTML = '';\n  // Ensure that the component gets rebuilt\n  Target.appendChild(<Component />);\n}\n\nexport default renderApp;\n","export function getQuotesByTickerURL(ticker) {\n  let tickerTemplate = ticker.replace(/,/g, '%2C');\n  return `https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/v2/get-quotes?region=US&symbols=${tickerTemplate}`;\n}\n\nexport function getGainersLosersURL(stock) {\n  return `https://apidojo-yahoo-finance-v1.p.rapidapi.com/market/v2/get-movers?region=${stock}&lang=en-US&count=6&start=0`;\n}\n\nexport const fetchBySymbol = url =>\n  fetch(url, {\n    method: 'GET',\n    headers: {\n      'x-rapidapi-key': process.env.YAHOO_FINANCE_API_KEY,\n      'x-rapidapi-host': 'apidojo-yahoo-finance-v1.p.rapidapi.com',\n    },\n  }).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n\n    throw new Error(res.statusText);\n  });\n\nexport const fetchGainersLosers = url =>\n  fetch(url, {\n    method: 'GET',\n    headers: {\n      'x-rapidapi-key': process.env.YAHOO_FINANCE_API_KEY,\n      'x-rapidapi-host': 'apidojo-yahoo-finance-v1.p.rapidapi.com',\n    },\n  }).then(res => {\n    if (res.ok) {\n      return res.json();\n    }\n\n    throw new Error(res.statusText);\n  });\n","export const NEW_YORK_STOCK = 'US';\nexport const LONDON_STOCK = 'GB';\nexport const SINGAPORE_STOCK = 'SG';\n\nconst allowedTickers = ['amd', 'ibm', 'aapl'];\nexport default allowedTickers;\n\nexport function getDateFromUnixTimestamp(dt) {\n  return new Date(dt * 1000).toLocaleDateString();\n}\n","import { getQuotesByTickerURL, fetchBySymbol } from './yahooFinanceAPI';\nimport allowedTickers from '../utils';\nimport renderApp from '../framework/render';\n\nexport function getCurrentTickerData() {\n  const { currentTicker, tickerProfile } = window.dataStore;\n  return tickerProfile[currentTicker];\n}\n\nexport function isCurrentTickerLoaded() {\n  return Boolean(getCurrentTickerData());\n}\n\nexport function validateAndLoadTickerData() {\n  const { currentTicker } = window.dataStore;\n\n  if (!allowedTickers.includes(currentTicker.toLowerCase())) {\n    const error = `enter one of the company Tickers: ${allowedTickers.join(',')}.`;\n    return Promise.resolve({ error });\n  }\n\n  const urlByTicker = getQuotesByTickerURL(currentTicker);\n  if (!isCurrentTickerLoaded()) {\n    return fetchBySymbol(urlByTicker).then(({ quoteResponse }) => ({\n      data: quoteResponse.result,\n    }));\n  }\n\n  return Promise.resolve({});\n}\n\nexport function performSearch(ticker) {\n  window.dataStore.currentTicker = ticker;\n  window.dataStore.error = null;\n  window.isSearchDataLoading = true;\n\n  validateAndLoadTickerData()\n    .then(({ error, data }) => {\n      window.dataStore.isSearchDataLoading = false;\n      if (error) {\n        window.dataStore.error = error;\n      } else if (data) {\n        window.dataStore.tickerProfile[ticker] = data[0];\n      }\n    })\n    .catch(() => {\n      window.dataStore.error = 'Some error occurred.';\n    })\n    .finally(renderApp);\n}\n","/** @jsx createElement */\n/** @jsxFrag createFragment */\nimport { createElement, createFragment } from '../framework/element';\nimport { performSearch } from '../data/stockQuotesData';\n\nexport default function SearchByTicker() {\n  return (\n    <input\n      type=\"text\"\n      value={window.dataStore.currentTicker}\n      onChange={e => performSearch(e.target.value)}\n    />\n  );\n}\n","/** @jsx createElement */\n/** @jsxFrag createFragment */\nimport { createElement } from '../framework/element';\n\nfunction TickerQuotesItem({ item }) {\n  return <li> {item} </li>;\n}\n\nexport default TickerQuotesItem;\n","/** @jsx createElement */\n/** @jsxFrag createFragment */\nimport { createElement, createFragment } from '../framework/element';\nimport TickerQuotesItem from './TickerQuotesItem';\n\nexport function StockQuotesToday({ quotesData }) {\n  if (!quotesData) return null;\n  const dataToShow = [\n    'longName',\n    'fullExchangeName',\n    'regularMarketPrice',\n    'regularMarketDayRange',\n  ];\n  return (\n    <>\n      <div>Stock quotes for {quotesData['symbol']}:</div>\n      <ul>\n        {dataToShow.map(key => (\n          <TickerQuotesItem item={quotesData[key]} />\n        ))}\n      </ul>\n    </>\n  );\n}\n","/** @jsx createElement */\n/** @jsxFrag createFragment */\nimport { createElement, createFragment } from '../framework/element';\n\nimport { isCurrentTickerLoaded } from '../data/stockQuotesData';\nimport { StockQuotesToday } from './StockQuotesToday';\nimport { getCurrentTickerData } from '../data/stockQuotesData';\n\nfunction StockQuotesResults() {\n  const { currentTicker, isSearchDataLoading, error } = window.dataStore;\n  let content = '';\n  if (currentTicker === '') {\n    content = 'Search by ticker';\n  } else {\n    if (isSearchDataLoading) {\n      content = 'Loading...';\n    }\n    if (error !== null) {\n      content = error;\n    }\n\n    const quotesData = getCurrentTickerData();\n    return <StockQuotesToday quotesData={quotesData} />;\n  }\n  return <div>{content}</div>;\n}\nexport default StockQuotesResults;\n","/** @jsx createElement */\n/** @jsxFrag createFragment */\nimport { createElement, createFragment } from '../framework/element';\n\nimport SearchByTicker from './SearchByTicker';\nimport StockQuotesResults from './StockQuotesResults';\n\nexport default function App() {\n  return (\n    <>\n      <SearchByTicker />\n      <StockQuotesResults />\n    </>\n  );\n}\n","import dataStore from './data/dataStore';\n/* import { validateAndLoadTickerData, performSearch } from './data/stockQuotesData'; */\nimport renderApp from './framework/render';\nimport App from './components/App';\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nwindow.dataStore = dataStore;\n\nrenderApp(App, document.getElementById('app-root'));\n"]}